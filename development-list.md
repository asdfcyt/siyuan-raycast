# SiYuan Raycast 插件功能开发清单

> 专注高频使用场景，基于现有 5 个功能的增强和补充

## 💡 核心设计理念

- **高频优先**: 只开发每天会多次使用的功能
- **快速操作**: 所有功能都要在 3 秒内完成
- **增强现有**: 在现有功能基础上增强，避免重复开发
- **实用至上**: 不追求复杂功能，专注解决实际痛点

---

## 🔥 高频增强功能（立即开发）

### 1. **Assets 附件快速查找**
**使用场景**: 审计工作中需要快速找到并分享 assets 文件夹中的附件资料
```
频率: 每天 8-12 次
场景: 需要将审计底稿、证据截图、扫描件等发给其他同事
操作: ⌘+Space → "find assets" → 输入文件名关键词 → 一键拷贝到桌面或直接发送
```

**具体实现**:
- 扫描 SiYuan workspace/data/assets 文件夹下的所有文件
- 支持按文件名、文件类型、修改时间搜索
- 显示文件预览（图片缩略图、文件大小、修改时间）
- 提供多种操作：
  - 拷贝文件到指定位置（如桌面）
  - 在 Finder 中显示文件
  - 快速发送给其他应用（邮件、微信等）
  - 复制文件路径
- 支持批量选择和操作

**API实现**:
```json
// 列出 assets 目录内容
POST /api/file/readDir
{
  "path": "/data/assets"
}

// 获取文件信息
POST /api/file/getFile
{
  "path": "/data/assets/filename.pdf"
}
```

**实现难度**: ⭐⭐ | **开发时间**: 3-4天

---

### 2. **快速引用和链接复制**
**使用场景**: 在编写邮件或报告时需要引用特定的审计发现或工作底稿内容
```
频率: 每天 6-8 次
场景: 给客户发邮件说明问题时，需要引用具体的审计发现；向上级汇报时引用工作底稿
操作: ⌘+Space → "复制引用" → 搜索"应收账款异常" → 选择具体块 → 复制引用链接
实际效果: 复制 "根据我们的测试发现..." + siyuan://blocks/xxx 链接
```

**具体实现**:
- 搜索到块后，一键复制 `((block-id "标题"))` 格式的引用
- 复制 `siyuan://blocks/block-id` 格式的跳转链接
- 复制块的纯文本内容（去除 Markdown 格式）
- 支持复制文档的人类可读路径

**API实现**:
```json
// 搜索后获取块ID
POST /api/query/sql
// 复制引用格式: ((20210101010101-abc123 "标题"))
```

**实现难度**: ⭐⭐ | **开发时间**: 2-3天

---

### 2. **快速块操作增强**
**使用场景**: 在搜索结果中直接对块进行简单操作
```
频率: 每天 5-8 次  
场景: 搜索到内容后需要快速标记、移动或删除
操作: 在搜索结果中直接右键操作，无需打开 SiYuan
```

**具体实现**:
- 在搜索结果中添加更多 Action：
  - 标记块（设置自定义属性，如 `custom-status: important`）
  - 快速添加标签到块
  - 将块移动到指定文档
  - 删除块（需确认）
- 支持批量操作（选中多个结果）

**API实现**:
```json
// 设置块属性
POST /api/block/setBlockAttrs
{
  "id": "block-id",
  "attrs": {"custom-status": "important"}
}

// 移动块
POST /api/block/moveBlock
```

**实现难度**: ⭐⭐⭐ | **开发时间**: 1周

---

### 3. **智能文档快速定位**
**使用场景**: 在多个审计项目和工作底稿之间快速切换和定位
```
频率: 每天 8-10 次
场景: 上午在做A公司现金流量表，下午要切换到B公司应收账款测试，晚上要更新C项目的问题跟踪表
操作: ⌘+Space → "跳转" → 输入"B公司应收" → 直接打开相关工作底稿
实际效果: 自动识别项目名+科目名，直接定位到对应文档的具体位置
```

**具体实现**:
- 预设常用文档位置（可自定义）：
  - "今日工作记录"
  - "待办事项"  
  - "项目A-问题清单"
  - "会议纪要"
- 支持按文档类型快速筛选：
  - 最近修改的工作底稿
  - 包含待办的文档
  - 标记为重要的文档
- 一键在 SiYuan 中打开并定位到指定位置

**API实现**:
```json
// 根据标签或属性查询特定文档
POST /api/query/sql
{
  "stmt": "SELECT * FROM blocks WHERE custom-type='work-log' AND created LIKE '20240115%'"
}
```

**实现难度**: ⭐⭐ | **开发时间**: 3-4天

---

### 4. **剪贴板内容智能处理**
**使用场景**: 从客户邮件、PDF、网页等复制内容到工作底稿时，自动格式化和标准化
```
频率: 每天 4-6 次
场景: 客户发来一段财务数据需要录入工作底稿；从监管网站复制法规条文；从邮件复制问题描述
操作: 复制内容 → ⌘+Space → "智能粘贴" → 自动格式化 → 插入到当前工作底稿
实际效果: 自动添加来源信息、时间戳，转换为标准的工作底稿格式
```

**具体实现**:
- 自动检测剪贴板内容类型：
  - URL → 自动获取网页标题，生成 `[标题](URL)` 格式
  - 纯文本 → 自动分段，添加合适的 Markdown 格式
  - 表格数据 → 转换为 Markdown 表格
  - 图片 → 上传到 SiYuan 并生成引用
- 支持预设的处理模板（如"会议记录格式"、"问题记录格式"）
- 处理完成后可选择插入位置

**API实现**:
```json
// 上传图片
POST /api/asset/upload
// 插入处理后的内容
POST /api/block/appendBlock
```

**实现难度**: ⭐⭐⭐ | **开发时间**: 1周

---

## ⚡ 中频实用功能（中期开发）

### 5. **文档状态批量管理**
**使用场景**: 批量更新多个文档的状态或属性
```
频率: 每周 2-3 次
场景: 项目阶段结束时，批量标记相关文档的状态
操作: ⌘+Space → "批量更新" → 选择文档 → 统一设置状态
```

**具体实现**:
- 按条件批量选择文档（标签、路径、时间范围）
- 批量设置自定义属性（如状态、优先级、负责人）
- 批量添加或移除标签
- 操作前显示预览，确认后执行

**实现难度**: ⭐⭐⭐ | **开发时间**: 1周

---

### 6. **工作区快速切换**
**使用场景**: 在不同的工作环境之间快速切换
```
频率: 每天 3-4 次
场景: 在审计项目A和项目B之间切换，快速进入对应的工作状态
操作: ⌘+Space → "切换到项目A" → 自动打开相关文档和设置环境
```

**具体实现**:
- 预设不同的工作区配置：
  - 打开特定的笔记本
  - 设置特定的搜索范围
  - 快速访问常用文档
- 支持工作区状态保存和恢复
- 一键切换整个工作环境

**实现难度**: ⭐⭐⭐ | **开发时间**: 1-2周

---

## 📋 低频补充功能（后期考虑）

### 7. **简单数据统计**
**使用场景**: 快速了解当前工作量和进度
```
频率: 每周 1-2 次
操作: ⌘+Space → "工作统计" → 显示简单的数据汇总
```

**具体实现**:
- 统计今日/本周的笔记数量
- 显示标记为待办的项目数量  
- 统计不同状态文档的数量
- 简单的可视化图表

**实现难度**: ⭐⭐⭐ | **开发时间**: 1周

---

### 8. **模板快速应用**
**使用场景**: 快速应用预设的文档模板
```
频率: 每周 2-3 次
操作: ⌘+Space → "应用模板" → 选择模板 → 快速创建标准化文档
```

**具体实现**:
- 维护常用模板库（会议记录、问题跟踪、工作计划等）
- 支持模板中的变量替换（日期、项目名等）
- 快速在指定位置创建基于模板的文档

**实现难度**: ⭐⭐ | **开发时间**: 3-5天

---

## 🎯 开发优先级排序

| 功能 | 使用频率 | 节省时间 | 实现难度 | 优先级 |
|------|----------|----------|----------|--------|
| Assets 附件快速查找 | 每天8-12次 | 极高 | ⭐⭐ | 🔥 最高 |
| 智能文档快速定位 | 每天8-10次 | 高 | ⭐⭐ | 🔥 最高 |
| 快速引用链接复制 | 每天6-8次 | 高 | ⭐⭐ | 🔥 最高 |
| 快速块操作增强 | 每天5-8次 | 中 | ⭐⭐⭐ | ⚡ 高 |
| 剪贴板智能处理 | 每天4-6次 | 中 | ⭐⭐⭐ | ⚡ 高 |
| 工作区快速切换 | 每天3-4次 | 中 | ⭐⭐⭐ | ⚡ 中 |
| 文档状态批量管理 | 每周2-3次 | 中 | ⭐⭐⭐ | 📋 中 |
| 模板快速应用 | 每周2-3次 | 低 | ⭐⭐ | 📋 低 |
| 简单数据统计 | 每周1-2次 | 低 | ⭐⭐⭐ | 📋 低 |

---

## 🚀 实施建议

### 第一阶段（2周内）
1. **Assets 附件快速查找** - 解决审计工作中最高频的文件分享痛点
2. **智能文档快速定位** - 提升多项目切换效率

### 第二阶段（1个月内）  
3. **快速块操作增强** - 在现有搜索功能基础上增强
4. **剪贴板智能处理** - 提升内容录入效率

### 第三阶段（按需开发）
5. 根据实际使用反馈，选择性开发其他功能

---

## 💡 关键成功因素

1. **专注高频**: 只做每天都会用的功能
2. **快速响应**: 每个操作都要在 3 秒内完成
3. **无缝集成**: 充分利用现有的 5 个功能，在其基础上增强
4. **简单配置**: 避免复杂的设置，开箱即用
5. **渐进增强**: 先做最简单的版本，再逐步完善

这份清单专注于真正高频使用的功能，避免了重复开发，每个功能都有明确的使用频率和价值。