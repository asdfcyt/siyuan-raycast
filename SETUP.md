# 思源笔记 Raycast 插件安装指南

## 安装步骤

### 1. 环境准备

确保您的系统已安装：
- Node.js (推荐 18.x 或更高版本)
- npm 或 yarn
- Raycast (最新版本)

### 2. 克隆并安装

```bash
# 进入项目目录
cd siyuan-raycast

# 安装依赖
npm install

# 开发模式运行
npm run dev
```

### 3. 思源笔记配置

#### 开启 API 服务
1. 打开思源笔记
2. 进入 `设置` → `关于`
3. 确保 `API 服务` 已开启
4. 记录 API 服务地址（通常是 `http://127.0.0.1:6806`）

#### 获取 API Token（如需要）
1. 在 `设置` → `关于` 页面
2. 复制 `API token` 字段的值
3. 如果没有显示 token，说明未启用鉴权

### 4. Raycast 插件配置

1. 打开 Raycast
2. 输入 `Extensions` 打开扩展管理
3. 找到 `SiYuan Notes` 插件
4. 点击设置图标进行配置：

#### 必需配置
- **SiYuan Server URL**: `http://127.0.0.1:6806`（或您的实际地址）

#### 可选配置
- **API Token**: 如果思源笔记启用了鉴权，填入 token
- **Default Notebook ID**: 默认笔记本的 ID（可在思源中查看）
- **Daily Note Path**: 每日笔记路径模板，如 `/daily/{{date}}`

### 5. 获取笔记本 ID

如果需要设置默认笔记本：

1. 在思源笔记中，右键点击需要的笔记本
2. 选择 `复制` → `复制笔记本 ID`
3. 将 ID 粘贴到插件配置中

## 使用方法

### 搜索笔记
- 在 Raycast 中输入 `search` 或 `搜索笔记`
- 输入关键词进行搜索
- 选择结果后按 Enter 在思源中打开

### 创建笔记
- 在 Raycast 中输入 `create` 或 `创建笔记`
- 填写标题和内容
- 选择笔记本和模板
- 按 Enter 创建

### 添加到每日笔记
- 在 Raycast 中输入 `daily` 或 `每日笔记`
- 输入要添加的内容
- 按 Enter 添加到今日笔记

### 查看最近访问
- 在 Raycast 中输入 `recent` 或 `最近访问`
- 浏览最近打开的文档
- 选择后按 Enter 打开

## 常见问题

### Q: 提示连接失败
A: 
1. 确认思源笔记正在运行
2. 检查 API 服务是否开启
3. 验证服务器地址是否正确
4. 检查防火墙设置

### Q: 搜索没有结果
A:
1. 确认搜索关键词正确
2. 检查是否有相关内容
3. 尝试不同的搜索词

### Q: 无法创建笔记
A:
1. 检查笔记本 ID 是否正确
2. 确认有写入权限
3. 验证路径格式

### Q: API Token 在哪里找？
A:
- 在思源笔记 `设置` → `关于` 页面
- 如果没有显示，说明未启用鉴权，可以不填

## 开发调试

### 查看日志
```bash
# 开发模式，可以看到控制台输出
npm run dev
```

### 代码检查
```bash
# 检查代码风格和错误
npm run lint

# 自动修复
npm run fix-lint
```

### 构建发布
```bash
# 构建生产版本
npm run build

# 发布到 Raycast Store
npm run publish
```

## 技术支持

如果遇到问题：
1. 查看本文档的常见问题部分
2. 检查思源笔记和 Raycast 的版本
3. 查看控制台日志信息
4. 提交 Issue 到项目仓库

## 更新日志

- v1.0.0: 初始版本，支持搜索、创建、每日笔记、最近访问功能